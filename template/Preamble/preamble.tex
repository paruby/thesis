% ******************************************************************************
% ****************************** Custom Margin *********************************

% Add `custommargin' in the document class options to use this section
% Set {innerside margin / outerside margin / topmargin / bottom margin}  and
% other page dimensions
\ifsetCustomMargin
  \RequirePackage[left=37mm,right=30mm,top=35mm,bottom=30mm]{geometry}
  \setFancyHdr % To apply fancy header after geometry package is loaded
\fi

% Add spaces between paragraphs
%\setlength{\parskip}{0.5em}
% Ragged bottom avoids extra whitespaces between paragraphs
\raggedbottom
% To remove the excess top spacing for enumeration, list and description
%\usepackage{enumitem}
%\setlist[enumerate,itemize,description]{topsep=0em}

% *****************************************************************************
% ******************* Fonts (like different typewriter fonts etc.)*************

% Add `customfont' in the document class option to use this section

\ifsetCustomFont
  % Set your custom font here and use `customfont' in options. Leave empty to
  % load computer modern font (default LaTeX font).
  %\RequirePackage{helvet}

  % For use with XeLaTeX
  %  \setmainfont[
  %    Path              = ./libertine/opentype/,
  %    Extension         = .otf,
  %    UprightFont = LinLibertine_R,
  %    BoldFont = LinLibertine_RZ, % Linux Libertine O Regular Semibold
  %    ItalicFont = LinLibertine_RI,
  %    BoldItalicFont = LinLibertine_RZI, % Linux Libertine O Regular Semibold Italic
  %  ]
  %  {libertine}
  %  % load font from system font
  %  \newfontfamily\libertinesystemfont{Linux Libertine O}
\fi

% *****************************************************************************
% **************************** Custom Packages ********************************

% ************************* Algorithms and Pseudocode **************************

%\usepackage{algpseudocode}


% ********************Captions and Hyperreferencing / URL **********************

% Captions: This makes captions of figures use a boldfaced small font.
%\RequirePackage[small,bf]{caption}

\RequirePackage[labelsep=space,tableposition=top]{caption}
\renewcommand{\figurename}{Fig.} %to support older versions of captions.sty


% *************************** Graphics and figures *****************************

%\usepackage{rotating}
%\usepackage{wrapfig}

% Uncomment the following two lines to force Latex to place the figure.
% Use [H] when including graphics. Note 'H' instead of 'h'
%\usepackage{float}
%\restylefloat{figure}

% Subcaption package is also available in the sty folder you can use that by
% uncommenting the following line
% This is for people stuck with older versions of texlive
%\usepackage{sty/caption/subcaption}
\usepackage{subcaption}

% ********************************** Tables ************************************
\usepackage{booktabs} % For professional looking tables
\usepackage{multirow}

%\usepackage{multicol}
%\usepackage{longtable}
%\usepackage{tabularx}


% *********************************** SI Units *********************************
\usepackage{siunitx} % use this package module for SI units


% ******************************* Line Spacing *********************************

% Choose linespacing as appropriate. Default is one-half line spacing as per the
% University guidelines

% \doublespacing
% \onehalfspacing
% \singlespacing


% ************************ Formatting / Footnote *******************************

% Don't break enumeration (etc.) across pages in an ugly manner (default 10000)
%\clubpenalty=500
%\widowpenalty=500

%\usepackage[perpage]{footmisc} %Range of footnote options


% *****************************************************************************
% *************************** Bibliography  and References ********************

%\usepackage{cleveref} %Referencing without need to explicitly state fig /table

% Add `custombib' in the document class option to use this section
\ifuseCustomBib
%   \RequirePackage[square, sort, numbers, authoryear]{natbib} % CustomBib

% If you would like to use biblatex for your reference management, as opposed to the default `natbibpackage` pass the option `custombib` in the document class. Comment out the previous line to make sure you don't load the natbib package. Uncomment the following lines and specify the location of references.bib file

\RequirePackage[backend=biber, style=authoryear, citestyle=authoryear, sorting=nty, natbib=true, maxbibnames=99,maxcitenames=1, dashed=false]{biblatex}
\addbibresource{References/references.bib} %Location of references.bib only for biblatex, Do not omit the .bib extension from the filename.
\DeclareBibliographyCategory{ignore}
\addtocategory{ignore}{rubenstein2017causal}


\usepackage{csquotes}
\renewcommand\nameyeardelim{, }
\DeclareNameAlias{sortname}{last-first}
\renewcommand*{\multinamedelim}{\addcomma\space}
\renewcommand*{\finalnamedelim}{\addcomma\space}
\setlength{\bibitemsep}{\baselineskip}
\renewbibmacro{in:}{}

\preto\fullcite{\AtNextCite{\defcounter{maxnames}{99}}}

\fi

% changes the default name `Bibliography` -> `References'
\renewcommand{\bibname}{References}
%\usepackage{bibentry}

% ******************************************************************************
% ************************* User Defined Commands ******************************
% ******************************************************************************

% *********** To change the name of Table of Contents / LOF and LOT ************

%\renewcommand{\contentsname}{My Table of Contents}
%\renewcommand{\listfigurename}{My List of Figures}
%\renewcommand{\listtablename}{My List of Tables}


% ********************** TOC depth and numbering depth *************************

\setcounter{secnumdepth}{2}
\setcounter{tocdepth}{2}


% ******************************* Nomenclature *********************************

% To change the name of the Nomenclature section, uncomment the following line

%\renewcommand{\nomname}{Symbols}


% ********************************* Appendix ***********************************

% The default value of both \appendixtocname and \appendixpagename is `Appendices'. These names can all be changed via:

%\renewcommand{\appendixtocname}{List of appendices}
%\renewcommand{\appendixname}{Appndx}

% *********************** Configure Draft Mode **********************************

% Uncomment to disable figures in `draft'
%\setkeys{Gin}{draft=true}  % set draft to false to enable figures in `draft'

% These options are active only during the draft mode
% Default text is "Draft"
%\SetDraftText{DRAFT}

% Default Watermark location is top. Location (top/bottom)
%\SetDraftWMPosition{bottom}

% Draft Version - default is v1.0
%\SetDraftVersion{v1.1}

% Draft Text grayscale value (should be between 0-black and 1-white)
% Default value is 0.75
%\SetDraftGrayScale{0.8}


% ******************************** Todo Notes **********************************
%% Uncomment the following lines to have todonotes.

%\ifsetDraft
%	\usepackage[colorinlistoftodos]{todonotes}
%	\newcommand{\mynote}[1]{\todo[author=kks32,size=\small,inline,color=green!40]{#1}}
%\else
%	\newcommand{\mynote}[1]{}
%	\newcommand{\listoftodos}{}
%\fi

% Example todo: \mynote{Hey! I have a note}

% *****************************************************************************
% ******************* Better enumeration my MB*************
\usepackage{enumitem}



% *****************************************************************************
% *****************************************************************************
% *****************************************************************************
% Additional stuff added by me
% *****************************************************************************
% *****************************************************************************
% *****************************************************************************


% *****************************************************************************
% Causality paper
% *****************************************************************************

%\makeatletter
%\let\oldsection=\section
%\renewcommand{\section}{\@ifstar\@ssection\@section}
%\newcommand{\@ssection}[1]{\oldsection*{\MakeUppercase{#1}}}
%\newcommand{\@section}[1]{\oldsection{\MakeUppercase{#1}}}
%\let\oldsubsection=\subsection
%\renewcommand{\subsection}{\@ifstar\@ssubsection\@subsection}
%\newcommand{\@ssubsection}[1]{\oldsubsection*{\MakeUppercase{#1}}}
%\newcommand{\@subsection}[1]{\oldsubsection{\MakeUppercase{#1}}}
%\makeatother

\usepackage{tikz}
\usetikzlibrary{arrows.meta}
\usetikzlibrary{calc}
\usetikzlibrary{shapes}

\tikzstyle{green}=[fill=green!50!black,draw=green!50!black,color=green!50!black]
\tikzstyle{red}=[fill=red!50!black,draw=red!50!black,color=red!50!black]

\definecolor{docolour}{gray}{.75}

\tikzstyle{keep}=[circle,draw,minimum size=2em]
\tikzstyle{drop1}=[circle,fill=green!50!white]
\tikzstyle{drop2a}=[circle,fill=red!50!white]
\tikzstyle{drop2b}=[circle,fill=blue!50!white]
\tikzstyle{micro}=[circle,draw,minimum size=1em,fill=docolour]
\DeclareRobustCommand\dropNode[1]{\tikz[baseline={([yshift=-.6ex]current bounding box.center)}]\node[#1] at(0,0) {};}
\usetikzlibrary{shadings}
\pgfdeclarelayer{background}
\pgfsetlayers{background,main}

\usepackage{ifthen}

\usepackage{subcaption}

\usepackage{enumitem}

\usepackage{amsmath}
\usepackage{amsfonts}
\usepackage{amssymb}
\usepackage{mathtools}
\DeclareMathOperator{\doop}{do}
\DeclareMathOperator{\pa}{pa}
%\DeclareMathOperator{\dom}{dom}
\DeclareMathOperator{\range}{range}
\newcommand{\nulli}{\varnothing}
\newcommand{\indexset}{\mathbb{I}}
\usepackage{amsthm}
\newtheorem{definition}{Definition}
\newtheorem{example}[definition]{Example}
\newtheorem{lemma}[definition]{Lemma}
\newtheorem{theorem}[definition]{Theorem}
\newtheorem{corollary}[definition]{Corollary}

\mathchardef\ordinarycolon\mathcode`\:
\mathcode`\:=\string"8000
\begingroup \catcode`\:=\active
  \gdef:{\mathrel{\mathop\ordinarycolon}}
\endgroup

\linepenalty=1000
\usepackage{microtype}

\usepackage{stackengine}
%\usepackage{stix}
%\newcommand{\vt}{{\mathrel{\raisebox{.3pt}{\scriptsize\topinset{$\smblksquare$}{$\vrectangle$}{.3pt}{}}}}}
%\newcommand{\vb}{{\mathrel{\raisebox{.3pt}{\scriptsize\bottominset{$\smblksquare$}{$\vrectangle$}{}{}}}}}
%\newcommand{\Mbr}{{\mathrel{\raisebox{.3pt}{\scriptsize\bottominset{$\smblksquare$}{$\squarelrquad$}{}{1.2pt}}}}}
%\newcommand{\Mbl}{{\mathrel{\raisebox{.3pt}{\scriptsize\bottominset{$\smblksquare$}{$\squarellquad$}{}{-1.2pt}}}}}


% *****************************************************************************
% ICA paper
% *****************************************************************************


%\usepackage[margin=1in]{geometry}

%\usepackage{times}

\usepackage[english]{babel}
\usepackage{hyperref}

\usepackage{graphicx}

\usepackage[T1]{fontenc}
%\usepackage[latin9]{inputenc}
\usepackage{amssymb}
%\usepackage{enumerate}

\usepackage{amsthm}
%\usepackage{kky}



% *****************************************************************************
% kky
% *****************************************************************************

\usepackage{mathtools}
\usepackage{bm} 

% Bold Alphabet 
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\newcommand{\ab}{\mathbf{a}}
\newcommand{\bb}{\mathbf{b}}
\newcommand{\cbb}{\mathbf{c}}
\newcommand{\db}{\mathbf{d}}
\newcommand{\eb}{\mathbf{e}}
\newcommand{\fb}{\mathbf{f}}
\newcommand{\gb}{\mathbf{g}}
\newcommand{\hb}{\mathbf{h}}
\newcommand{\ib}{\mathbf{i}}
\newcommand{\jb}{\mathbf{j}}
\newcommand{\kb}{\mathbf{k}}
\newcommand{\lb}{\mathbf{l}}
\newcommand{\mb}{\mathbf{m}}
\newcommand{\nbb}{\mathbf{n}}
\newcommand{\ob}{\mathbf{o}}
\newcommand{\pb}{\mathbf{p}}
\newcommand{\qb}{\mathbf{q}}
\newcommand{\rb}{\mathbf{r}}
\newcommand{\sbb}{\mathbf{s}}
\newcommand{\tb}{\mathbf{t}}
\newcommand{\ub}{\mathbf{u}}
\newcommand{\vb}{\mathbf{v}}
\newcommand{\wb}{\mathbf{w}}
\newcommand{\xb}{\mathbf{x}}
\newcommand{\yb}{\mathbf{y}}
\newcommand{\zb}{\mathbf{z}}
% Upper case
\newcommand{\Ab}{\mathbf{A}}
\newcommand{\Bb}{\mathbf{B}}
\newcommand{\Cb}{\mathbf{C}}
\newcommand{\Db}{\mathbf{D}}
\newcommand{\Eb}{\mathbf{E}}
\newcommand{\Fb}{\mathbf{F}}
\newcommand{\Gb}{\mathbf{G}}
\newcommand{\Hb}{\mathbf{H}}
\newcommand{\Ib}{\mathbf{I}}
\newcommand{\Jb}{\mathbf{J}}
\newcommand{\Kb}{\mathbf{K}}
\newcommand{\Lb}{\mathbf{L}}
\newcommand{\Mb}{\mathbf{M}}
\newcommand{\Nb}{\mathbf{N}}
\newcommand{\Ob}{\mathbf{O}}
\newcommand{\Pb}{\mathbf{P}}
\newcommand{\Qb}{\mathbf{Q}}
\newcommand{\Rb}{\mathbf{R}}
\newcommand{\Sbb}{\mathbf{S}}
\newcommand{\Tb}{\mathbf{T}}
\newcommand{\Ub}{\mathbf{U}}
\newcommand{\Vb}{\mathbf{V}}
\newcommand{\Wb}{\mathbf{W}}
\newcommand{\Xb}{\mathbf{X}}
\newcommand{\Yb}{\mathbf{Y}}
\newcommand{\Zb}{\mathbf{Z}}


% Calligraphic fonts
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\newcommand{\Acal}{\mathcal{A}}
\newcommand{\Bcal}{\mathcal{B}}
\newcommand{\Ccal}{\mathcal{C}}
\newcommand{\Dcal}{\mathcal{D}}
\newcommand{\Ecal}{\mathcal{E}}
\newcommand{\Fcal}{\mathcal{F}}
\newcommand{\Gcal}{\mathcal{G}}
\newcommand{\Hcal}{\mathcal{H}}
\newcommand{\Ical}{\mathcal{I}}
\newcommand{\Jcal}{\mathcal{J}}
\newcommand{\Kcal}{\mathcal{K}}
\newcommand{\Lcal}{\mathcal{L}}
\newcommand{\Mcal}{\mathcal{M}}
\newcommand{\Ncal}{\mathcal{N}}
\newcommand{\Ocal}{\mathcal{O}}
\newcommand{\Pcal}{\mathcal{P}}
\newcommand{\Qcal}{\mathcal{Q}}
\newcommand{\Rcal}{\mathcal{R}}
\newcommand{\Scal}{{\mathcal{S}}}
\newcommand{\Tcal}{{\mathcal{T}}}
\newcommand{\Ucal}{\mathcal{U}}
\newcommand{\Vcal}{\mathcal{V}}
\newcommand{\Wcal}{\mathcal{W}}
\newcommand{\Xcal}{\mathcal{X}}
\newcommand{\Ycal}{\mathcal{Y}}
\newcommand{\Zcal}{\mathcal{Z}}

% Widely accepted definitions (from MKolar, James & Akshay)
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\newcommand{\CC}{\mathbb{C}} % Complex numbers
\newcommand{\DD}{\mathbb{D}} % \mathbb(D) 
\newcommand{\EE}{\mathbb{E}} % Expectation
\newcommand{\VV}{\mathbb{V}} % Variance
\newcommand{\II}{\mathbb{I}} % Indicator
\newcommand{\KK}{\mathbb{K}} % Arbitrary field
\newcommand{\LL}{\mathbb{L}} % Loss
\newcommand{\MM}{\mathbb{M}} % Median
\newcommand{\NN}{\mathbb{N}} % Natural numbers
\newcommand{\PP}{\mathbb{P}} % Probability
\newcommand{\QQ}{\mathbb{Q}} % Rationals
\newcommand{\RR}{\mathbb{R}} % Real numbers
\newcommand{\XX}{\mathbb{X}} %
\newcommand{\YY}{\mathbb{Y}} %
\newcommand{\ZZ}{\mathbb{Z}} % Integers

% Stuff mostly appearing in Statistics
\newcommand{\Xbar}{\bar{X}}
\newcommand{\Ybar}{\bar{Y}}
\newcommand{\Zbar}{\bar{Z}}

% Indicator function
\newcommand{\indfone}{\mathbbm{1}}
\newcommand{\indfI}{I}
% For Covar
\newcommand{\Covar}{\mathbb{C} \mathrm{ov} } % Co-Variance

% Some standard definitions
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\newcommand*{\mini}{\mathop{\mathrm{minimize}}}
\newcommand*{\maxi}{\mathop{\mathrm{maximize}}}
\newcommand*{\subto}{\mathop{\mathrm{subject}\;\mathrm{to}}}
% repeating these 3 mainly for writing optimization problems
\newcommand*{\minip}{\mathop{\mathrm{minimize}\;\;}}
\newcommand*{\maxip}{\mathop{\mathrm{maximize}\;\;}}
\newcommand*{\subtop}{\mathop{\mathrm{subject}\;\mathrm{to}\;\;}}
\newcommand*{\argmin}{\mathop{\mathrm{argmin}}}
\newcommand*{\argmax}{\mathop{\mathrm{argmax}}}
\newcommand{\sgn}{\mathop{\mathrm{sign}}}
\newcommand{\suchthat}{\mathrm{s.t.}}
\newcommand{\tr}{\mathop{\mathrm{tr}}}
\DeclareMathOperator*{\Var}{{\rm Var}}
\DeclareMathOperator*{\Corr}{Corr}
\DeclareMathOperator*{\Cov}{Cov}
\DeclareMathOperator*{\ind}{1{\hskip -2.5 pt}\hbox{I}}  % Indicator
\newcommand{\smallfrac}[2]{{\textstyle \frac{#1}{#2}}}  

% Upright d for differentials
\newcommand{\ud}{\mathrm{d}}
                                                        
\newcommand*{\zero}{{\bf 0}}
\newcommand*{\one}{{\bf 1}}

\newcommand*{\Risk}{{\rm Risk}}
\newcommand*{\Bias}{{\rm Bias}}

\newcommand{\pen}{{\rm pen}}
\newcommand{\diag}{{\rm diag}}
\newcommand{\diam}{{\bf{\rm diam}}}
\newcommand{\spann}{{\bf{\rm span}}}
\newcommand{\nulll}{{\bf{\rm null}}}
\newcommand{\vol}{{\bf{\rm vol}}}

% Other Generic Math stuff 
\newcommand{\rank}{{\bf{\rm rank}}}
\newcommand{\dimension}{{\bf{\rm dim}}}

% Hypographs and Epigraphs
\newcommand{\epi}{{\bf{\rm epi}}\;}
\newcommand{\hypo}{{\bf{\rm hypo}}\;}

% suppport domain etc
%\newcommand{\supp}{{\bf{\rm supp}}\;} % support of a function
\newcommand{\dom}{{\bf{\rm dom}}\;} % domain of a function
\newcommand{\interior}{{\bf{\rm int}}\;} % interior of a set

% Big O notation
\newcommand{\bigO}{\tilde{O}}
\newcommand{\bigOtilde}{\tilde{\mathcal{O}}}
\newcommand{\littleO}{\mathcal{o}}
\newcommand{\bigOmega}{\mathcal{\Omega}}
\newcommand{\littleOmega}{\mathcal{\omega}}

% Distributions
\newcommand{\Bern}{{\bf{\rm Bern}}\,} % support of a function
\newcommand{\Categ}{{\bf{\rm Categ}}\,} % support of a function
\newcommand{\Mult}{{\bf{\rm Mult}}\,} % support of a function
\newcommand{\Dir}{{\bf{\rm Dir}}\,} % support of a function

% derivatives and partial fractions
\newcommand{\differentiate}[2]{ \frac{ \ud #2}{\ud #1} }
\newcommand{\differentiateat}[3]{ \frac{ \ud #2}{\ud #1}  \Big|_{#1=#3} }
\newcommand{\partialfrac}[2]{ \frac{ \partial #2}{\partial #1} }
\newcommand{\partialfracat}[3]{ \frac{ \partial #2}{\partial #1} \Big|_{#1=#3} }
\newcommand{\partialfracorder}[3]{ \frac{ \partial^{#3} #2}{\partial^{#3} #1} }
\newcommand{\partialfracatorder}[4]{ \frac{ \partial^{#3} #2}
  {\partial^{#3} #1} \Big|_{#1=#4} }

% Equal signs
\newcommand{\defeq}{\stackrel{\Delta}{=}}

% probabilistic convergence
\newcommand{\indistribution}{\xrightarrow[]{\Dcal}}
\newcommand{\inprobability}{\xrightarrow[]{\Pcal}}

\newcommand{\iid}{i.i.d.}
\newcommand{\iidsim}{\stackrel{{iid}}{\sim}}
\def\bks{\backslash}

% Ceil & Floor
\newcommand{\ceil}[1]{\lceil #1 \rceil}
\newcommand{\floor}[1]{\lfloor #1 \rfloor}

% Sets
\renewcommand{\emptyset}{\varnothing}

% bold greek letters
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\newcommand*{\alphab}{\bm{\alpha}}
\newcommand*{\betab}{\bm{\beta}}
\newcommand*{\Sigmab}{\bm{\Sigma}}
\newcommand*{\Omegab}{\bm{\Omega}}
\newcommand*{\omegab}{{\bm{\omega}}}
\newcommand*{\Gammab}{\bm{\Gamma}}
\newcommand*{\Psib}{\bm{\Psi}}
\newcommand*{\Thetab}{\bm{\Theta}}
\newcommand*{\thetab}{\bm{\theta}}
\newcommand*{\taub}{\bm{\tau}}
\newcommand*{\epsilonb}{\bm{\epsilon}}
\newcommand*{\etab}{\bm{\eta}}
\newcommand*{\xib}{\bm{\xi}}
\newcommand*{\gammab}{\bm{\gamma}}
\newcommand*{\deltab}{\bm{\delta}}
\newcommand*{\Deltab}{\bm{\Delta}}
\newcommand*{\mub}{\bm{\mu}}
\newcommand*{\rhobb}{\bm{\rho}}
\newcommand*{\Phib}{\bm{\Phi}}
\newcommand*{\phib}{\bm{\phi}}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%


%%%%% Norms %%%%%
\newcommand{\orlnorm}[2]{||#1||_{\Psi_{#2}}}
\newcommand{\norm}[1]{||#1||}
\newcommand{\bignorm}[1]{\bigg|\bigg|#1\bigg|\bigg|}
\newcommand{\opnorm}[2]{| \! | \! | #1 | \! | \! |_{{#2}}}

%%%%% Dot product
\newcommand{\dotp}[2]{\langle{#1},{#2}\rangle}

%%%%  brackets
\newcommand{\inner}[2]{\left\langle #1,#2 \right\rangle}
\newcommand{\rbr}[1]{\left(#1\right)}
\newcommand{\sbr}[1]{\left[#1\right]}
\newcommand{\cbr}[1]{\left\{#1\right\}}
\newcommand{\nbr}[1]{\left\|#1\right\|}
\newcommand{\abr}[1]{\left|#1\right|}


%%%%%%%%%  Other commands
\newcommand{\mcomment}[1]{\marginpar{\tiny{#1}}}
\newcommand{\fcomment}[1]{\footnote{\tiny{#1}}}


%%%%%%%%  amsmath %%%%%%%%%%
% Proofs/ Theorems/ Lemmas etc
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\ifx\BlackBox\undefined
\newcommand{\BlackBox}{\rule{1.5ex}{1.5ex}}  % end of proof
\fi

\ifx\QED\undefined
\def\QED{~\rule[-1pt]{5pt}{5pt}\par\medskip}
\fi

\ifx\proof\undefined
\newenvironment{proof}{\par\noindent{\bf Proof\ }}{\hfill\BlackBox\\[2mm]}
\fi
% Proof Sketch
\ifx\proofsketch\undefined
\newenvironment{proofsketch}{\par\noindent{\bf Proof Sketch\ }}{\hfill\BlackBox\\[2mm]}
\fi

%\ifx\theorem\undefined
%\newtheorem{theorem}{Theorem}
%\fi
%\ifx\example\undefined
%\newtheorem{example}{Example}
%\fi
%\ifx\property\undefined
%\newtheorem{property}{Property}
%\fi
%\ifx\lemma\undefined
%\newtheorem{lemma}[theorem]{Lemma}
%\fi
%\ifx\proposition\undefined
%\newtheorem{proposition}[theorem]{Proposition}
%\fi
%\ifx\remark\undefined
%\newtheorem{remark}[theorem]{Remark}
%\fi
%\ifx\corollary\undefined
%\newtheorem{corollary}[theorem]{Corollary}
%\fi
%\ifx\definition\undefined
%\newtheorem{definition}[theorem]{Definition}
%\fi
%\ifx\conjecture\undefined
%\newtheorem{conjecture}[theorem]{Conjecture}
%\fi
%\ifx\fact\undefined
%\newtheorem{fact}[theorem]{Fact}
%\fi
%\ifx\claim\undefined
%\newtheorem{claim}[theorem]{Claim}
%\fi
%\ifx\assum\undefined
%\newtheorem{assumption}[theorem]{Assumption}
%\fi
%\ifx\assum\undefined
%\newtheorem{observation}[theorem]{Observation}
%\fi


% Colours
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%\definecolor{darkblue}{rgb}{0.0,0.0,0.7} % for hyper-links


% Hyperlinks
%\hypersetup{colorlinks,breaklinks, linkcolor=darkblue, urlcolor=darkblue, anchorcolor=darkblue, citecolor=darkblue}
%\providecommand*\url[1]{\href{#1}{#1}} % url
%\renewcommand*\url[1]{\href{#1}{\texttt{#1}}} %url


% Other random stuff
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\newcommand{\horizontalline}{\noindent\rule[0.5ex]{\linewidth}{1pt}}
\newcommand{\HRule}{\rule{\linewidth}{0.5mm}} 
\newcommand{\Hrule}{\rule{\linewidth}{0.3mm}}
\newcommand{\HRuleN}{\HRule\\} 
\newcommand{\HruleN}{\Hrule\\}
\newcommand{\superscript}[1]{{\scriptsize \ensuremath{^{\textrm{#1}}}}}
\newcommand{\supindex}[2]{#1^{(#2)}}
\newcommand{\xii}[1]{\supindex{\xb}{#1}}
\newcommand{\yii}[1]{\supindex{y}{#1}}
\newcommand{\zii}[1]{\supindex{\zb}{#1}}
\newcommand{\Xii}[1]{\supindex{\Xb}{#1}}
\newcommand{\Wii}[1]{\supindex{\Wb}{#1}}
\newcommand{\Yii}[1]{\supindex{Y}{#1}}
\newcommand{\Zii}[1]{\supindex{Z}{#1}}

\newcommand{\mut}[2]{\mu_{#1}({#2})}
\newcommand{\sigmat}[2]{\sigma_{#1}({#2})}
\newcommand{\tmut}[2]{\tilde{\mu}_{#1}({#2})}
\newcommand{\tyb}{\tilde{\yb}}
\newcommand{\ty}{\tilde{y}}
\newcommand{\tO}{\tilde{O}}
\newcommand{\tf}{\tilde{f}}
\newcommand{\tz}{\tilde{\zb}}
\newcommand{\tT}{\tilde{T}}
\newcommand{\tx}{\tilde{\xb}}
\newcommand{\sigb}{\mathbf{\Sigma}}
\newcommand{\bzero}{\mathbf{0}}
\newcommand{\txii}[1]{\supindex{\tx}{#1}}

% Equation Numbering - Numbers only one equation in align*, equation*
\newcommand\numberthis{\addtocounter{equation}{1}\tag{\theequation}}




% project specific
\newcommand{\xbm}{{\bm{x}}}
\newcommand{\sbm}{{\bm{s}}}
\newcommand{\ybm}{{\bm{y}}}
\newcommand{\zbm}{{\bm{z}}}
\newcommand{\vbm}{{\bm{v}}}
\newcommand{\Xbm}{{\bm{X}}}
\newcommand{\Ybm}{{\bm{Y}}}
\newcommand{\Zbm}{{\bm{Z}}}
\newcommand{\Vbm}{{\bm{V}}}
\newcommand{\Xset}{{\set{X}}}
\newcommand{\Yset}{{\set{Y}}}
\newcommand{\Zset}{{\set{Z}}}
\newcommand{\Vset}{{\set{V}}}

\def\-{\raisebox{.75pt}{-}}
\newcommand{\shortminus}{\scalebox{0.75}[1.0]{\( - \)}}
\newcommand{\thetagen}{{\bm{\theta}^{}_g}}
\newcommand{\thetadopt}{{\bm{\theta}^*_d}}
\newcommand{\thetagopt}{{\bm{\theta}^*_g}}
\newcommand{\thetad}{{\bm{\theta}_d}}
\newcommand{\thetade}{{\bm{\theta}_d^e}}
\newcommand{\thetadd}{{\bm{\theta}_d^d}}
\newcommand{\supp}{{\mathrm{supp}}}
\newcommand{\vj}{{\bm{v}_j}}
\newcommand{\vjs}{{\{\bm{v}_j\}_{j=1}^J}}
\newcommand{\allparams}{{(\bm{\theta}_g, \bm{\theta}_d, \mathbf{V})}}
\newcommand{\allparamsours}{{(\bm{\theta}_g, \set{V})}}
\newcommand{\yvbm}{{\bm{yv}}}
\newcommand{\vybm}{{\bm{vy}}}
\newcommand{\vxbm}{{\bm{vx}}}
\newcommand{\xvbm}{{\bm{xv}}}
\newcommand{\xybm}{{\bm{xy}}}
\newcommand{\yxbm}{{\bm{yx}}}
\newcommand{\thetabm}{{\bm{\theta}}}
\newcommand{\omegabm}{{\bm{\omega}}}


\newcommand{\exvj}{{\bm{e}_{\bm{xv}}^j}}
\newcommand{\eyvj}{{\bm{e}_{\bm{yv}}^j}}

\newcommand*{\tran}{^{\mkern-1.5mu\mathsf{T}}}



% *****************************************************************************
% WAE
% *****************************************************************************

%\usepackage[utf8]{inputenc} % allow utf-8 input
%\usepackage[T1]{fontenc}    % use 8-bit T1 fonts
%\usepackage{hyperref}       % hyperlinks
%\usepackage{url}            % simple URL typesetting
%\usepackage{booktabs}       % professional-quality tables
%\usepackage{amsfonts}       % blackboard math symbols
%\usepackage{nicefrac}       % compact symbols for 1/2, etc.
%\usepackage{microtype}      % microtypography
%
%% added packages
%\usepackage{natbib}
%\usepackage{tikz}
\usepackage{rotating}
%\usepackage{hyperref}
%\usepackage{enumitem}
%\usepackage{amsmath,amsfonts, amssymb, amsthm}
%\usepackage{subcaption}
%\usepackage{graphicx}
%\newlength\figureheight
%\newlength\figurewidth
%
%\newcommand{\todo}[1]{{\color{red}TODO: #1}}

% Special letters
\def\bydef{:=}
\def\F{\mathcal{F}}
\def\G{\mathcal{G}}
\def\l{\ell}
\def\X{\mathcal{X}}
\def\B{\mathbb{B}}
\def\Y{\mathcal{Y}}
\def\E{\mathbb{E}}
\def\dZ{d_{\mathcal{Z}}}
\def\dX{d_{\mathcal{X}}}
\def\dP{d_{\mathcal{I}}}
\def\Z{\mathcal{Z}}
\def\R{\mathbb{R}}
\def\C{\mathbb{C}}
\def\N{\mathbb{N}}
\def\Ng{\mathcal{N}}
\def\GAN{\mathrm{GAN}}
\def\fGAN{\mathrm{f,GAN}}
\def\KL{\mathrm{KL}}
\def\JS{\mathrm{JS}}
\def\VAE{\mathrm{VAE}}
\def\POT{\mathrm{OT}}
\def\POT{\mathrm{WAE}}
\def\AAE{\mathrm{AAE}}
\def\WGAN{\mathrm{WGAN}}
\def\AVB{\mathrm{AVB}}
\def\supp{\mathbf{supp}\,}
\def\M{\mathcal{M}}
\def\H{\mathcal{H}}
\def\A{\mathcal{A}}
\def\K{\mathcal{K}}
\def\U{\mathcal{U}}
\def\grad{\nabla}
\def\P{\mathcal{P}}
\def\dI{d_\mathcal{I}}




%------------------------------------------------------------------------------------
% RAM-MC
%------------------------------------------------------------------------------------

\usepackage[utf8]{inputenc} % allow utf-8 input
\usepackage[T1]{fontenc}    % use 8-bit T1 fonts
\usepackage{hyperref}       % hyperlinks
\usepackage{url}            % simple URL typesetting
\usepackage{booktabs}       % professional-quality tables
\usepackage{amsfonts}       % blackboard math symbols
\usepackage{nicefrac}       % compact symbols for 1/2, etc.
\usepackage{microtype}      % microtypography
% \usepackage{xcolor}
%\usepackage[dvipsnames]{xcolor}
\usepackage{amsmath}
\usepackage{amssymb}
\usepackage{amsthm}
\usepackage{graphicx}
\usepackage{dsfont}
\usepackage{tikz}
\usepackage{subcaption}
\usepackage{array}
\usepackage{makecell}
\usepackage{multirow}
\usepackage{wrapfig}
\usepackage{wasysym}
\usetikzlibrary{positioning}


\newtheorem{proposition}{Proposition}
%\newtheorem{theorem}{Theorem}
%\newtheorem{lemma}{Lemma}
%\newtheorem{corollary}{Corollary}
%\newtheorem{assumption}{Assumption}
%\newtheorem{definition}{Definition}
\newtheorem*{theorem*}{Theorem}

%\newcommand{\R}{\mathbb{R}}
%\newcommand{\E}{\mathop{\mathbb{E}}}
%\newcommand{\Z}{\mathcal{Z}}
%\newcommand{\X}{\mathcal{X}}
%\newcommand{\F}{\mathcal{F}}
\newcommand{\V}{\text{Var}}
\newcommand{\Prob}{\mathbb{P}}
\newcommand{\XN}{\mathbf{X}^N}
\newcommand{\XM}{\mathbf{X}^M}
\newcommand{\ZM}{\mathbf{Z}^M}
\newcommand{\zK}{\mathbf{z}^K}
%\newcommand{\KL}{\mathrm{KL}}
\newcommand{\TV}{\mathrm{TV}}
%\newcommand{\JS}{\mathrm{JS}}
\newcommand{\Hsq}{\mathrm{H}^2}
\newcommand{\ilya}[1]{{\color{magenta} Ilya: #1}}
\newcommand{\paul}[1]{{\color{blue} Paul: #1}}
\newcommand{\carlos}[1]{{\color{red} Carlos: #1}}
\newcommand\encircle[1]{%
  \tikz[baseline=(X.base)] 
    \node (X) [draw, shape=circle, inner sep=0] {\strut #1};}

\definecolor{transparent}{RGB}{200, 200, 200}
\definecolor{darkgreen}{RGB}{0, 170, 0}
\definecolor{lightgreen}{RGB}{0, 200, 0}
\definecolor{ineq}{RGB}{220, 220, 255}
\definecolor{purple}{RGB}{153, 0, 255}
\definecolor{amber}{rgb}{1.0, 0.75, 0.0}


